{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}
  <h1>
    TODO list
    <a href="{% url 'task_list:task-create' %}" class="btn btn-primary link-to-page" style="float: right">
      Add task
    </a>
  </h1>
  <br>

  <form action="" method="get" class="form-inline">
    {{ search_form|crispy }}
    <input class="btn btn-secondary" type="Submit" value="Search">
  </form>
  <br>
  {% if task_list %}
      {% for task in task_list %}
          <p><strong>{{ task.name }}
            {% if task.done %}<span style="color: green">Done</span><a href="{% url 'task_list:toggle-task-done' pk=task.id%}" class="btn btn-success" style="float: right">Complete</a>{% else %}<span style="color: red">Not done</span><a href="{% url 'task_list:toggle-task-done' pk=task.id%}" class="btn btn-secondary" style="float: right">Undo</a>{% endif %}
          </strong></p>
          <p style="font-size: 14px">
          Created: {{ task.created_datetime }} {% if task.deadline_date %}Deadline: {{ task.deadline_date }} {% if task.deadline_time %}{{ task.deadline_time }}{% else %}{% endif %}{% else %} {% endif %}
          </p>
          <p>
          Tags:
            {% for tag in task.tags.all %}
              {{ tag.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
            <a class="links" href="{% url 'task_list:task-update' pk=task.id%}">Update</a> <a class="links" href="{% url 'task_list:task-delete' pk=task.id %}">Delete</a>
          </p>
        <hr>
      {% endfor %}
  {% else %}
    <p>There are no task in list</p>
  {% endif %}
{% endblock %}